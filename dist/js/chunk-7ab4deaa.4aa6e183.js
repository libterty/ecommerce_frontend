(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ab4deaa"],{"1db0":function(t,e,r){"use strict";var i=r("52c1"),o=r.n(i);o.a},"52c1":function(t,e,r){},"5c12":function(t,e,r){},6099:function(t,e,r){"use strict";var i=r("e633"),o=r.n(i);o.a},"68ef":function(t,e,r){"use strict";var i=r("5c12"),o=r.n(i);o.a},"94ad":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"py-5 admin-product-container"},[t.isShow?r("div",[r("AdminProductBtnGroup",{attrs:{initProduct:t.initProduct,initColors:t.initColors},on:{"after-product-revise":t.afterProductRevise,"after-color-create":t.afterColorCreate,"after-color-revise":t.afterColorRevise,"after-inventory-change":t.afterInventoryChange,"after-submit-image":t.afterSubmitImage}})],1):t._e(),t.isShow?r("div",[r("AdminProduct",{attrs:{initProduct:t.initProduct}})],1):t._e(),r("br"),r("a",{attrs:{href:"javascript:history.back()"}},[t._v("回上一頁")])])},o=[],n=(r("b0c0"),r("d3b7"),r("5319"),r("96cf"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""}},[r("b-row",[r("b-col",{attrs:{md:"6"}},[r("b-carousel",{staticStyle:{"text-shadow":"0px 0px 2px #000"},attrs:{id:"carousel-no-animation","no-animation":"",indicators:""}},t._l(t.initProduct.Images,(function(e){return r("b-carousel-slide",{key:e.id,scopedSlots:t._u([{key:"img",fn:function(){return[r("b-img-lazy",{staticClass:"d-block img-fluid w-100",attrs:{width:"auto",height:"auto","fluid-grow":"",src:e.url,alt:"image slot"}})]},proxy:!0}],null,!0)})})),1)],1),r("b-col",{attrs:{md:"6"}},[r("b-card-body",{attrs:{title:t.initProduct.name,"sub-title":t.initProduct.Category.name}},[r("b-card-text",[r("b-list-group",{attrs:{flush:""}},[r("b-list-group-item",{staticClass:"text-left"},[r("strong",[t._v("成本 : ")]),r("small",[t._v(t._s(t.initProduct.cost))])]),r("b-list-group-item",{staticClass:"text-left"},[r("strong",[t._v("售價 : ")]),r("small",[t._v(t._s(t.initProduct.price))])]),r("b-list-group-item",{staticClass:"text-left"},[r("strong",[t._v("尺寸 : ")]),r("small",[t._v(t._s(t.initProduct.length)+" * "+t._s(t.initProduct.width)+" * "+t._s(t.initProduct.height))])]),r("b-list-group-item",{staticClass:"text-left"},[r("strong",[t._v("重量 : ")]),r("small",[t._v(t._s(t.initProduct.weight)+" (公斤)")])]),r("b-list-group-item",{staticClass:"text-left"},[r("strong",[t._v("關注度 : ")]),r("small",[t._v(t._s(t.initProduct.viewCounts))])]),r("b-list-group-item",{staticClass:"text-left"},[r("strong",[t._v("種類 : ")]),r("small",[t._v(t._s(t.initProduct.Category.name))])]),t._l(t.initProduct.inventories,(function(e){return r("b-list-group-item",{key:e.id,staticClass:"text-left"},[r("strong",[t._v(t._s(t._f("convertLanguage")(e.name))+" : ")]),r("small",{class:t.checkQuantity(e.Inventory.quantity)},[t._v(t._s(e.Inventory.quantity))])])}))],2)],1)],1)],1)],1)],1)}),a=[],s={name:"admin-product-DashBoard",props:{initProduct:{type:Object}},filters:{convertLanguage:function(t){return"blue"===t?"藍色":"black"===t?"黑色":"white"===t?"白色":"yellow"===t?"黃色":""}},methods:{checkQuantity:function(t){return t<=5?"product-Quantity-danger":"product-Quantity-success"}},watch:{initProduct:function(t){this.initProduct=t}}},l=s,c=(r("1db0"),r("2877")),u=Object(c["a"])(l,n,a,!1,null,"8b3580c4",null),d=u.exports,m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-nav",{attrs:{tabs:"",align:"center"}},[r("b-nav-item",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.editProdut",modifiers:{editProdut:!0}}]},[t._v("修改產品資訊")])],1),r("b-nav-item",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.addProductColor",modifiers:{addProductColor:!0}}]},[t._v("新增產品顏色")])],1),r("b-nav-item",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.reviseProductColor",modifiers:{reviseProductColor:!0}}]},[t._v("修改產品顏色")])],1),r("b-nav-item",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.editInventory",modifiers:{editInventory:!0}}]},[t._v("修改產品庫存")])],1),r("b-nav-item",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.editImage",modifiers:{editImage:!0}}]},[t._v("新增產品圖片")])],1)],1),r("b-modal",{attrs:{id:"editProdut",title:"修改產品資訊"},on:{ok:function(e){return e.preventDefault(),t.editProductSubmit()}}},[r("b-form",[r("b-form-group",{attrs:{"label-cols-sm":"3",label:"Name :","label-align-sm":"right","label-for":"name"}},[r("b-form-input",{attrs:{id:"name",state:t.form.name.length>0,type:"text",name:"name",placeholder:t.initProduct.name,required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"Description :","label-align-sm":"right","label-for":"description"}},[r("b-form-textarea",{attrs:{id:"description",state:t.form.description.length>0,placeholder:t.initProduct.description,type:"text",rows:"3","max-rows":"6",name:"description",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"成本 :","label-align-sm":"right","label-for":"cost",description:"成本 : "+t.initProduct.cost}},[r("b-form-input",{attrs:{id:"cost",state:t.form.cost>0,type:"number",min:"1",name:"cost",required:""},model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",e)},expression:"form.cost"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"售價 :","label-align-sm":"right","label-for":"price",description:"售價 : "+t.initProduct.price}},[r("b-form-input",{attrs:{id:"price",state:t.form.price>0,type:"number",min:"1",name:"price",required:""},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"高度 :","label-align-sm":"right","label-for":"height",description:"高度 : "+t.initProduct.height}},[r("b-form-input",{attrs:{id:"height",state:t.form.height>0,type:"number",min:"1",name:"height",required:""},model:{value:t.form.height,callback:function(e){t.$set(t.form,"height",e)},expression:"form.height"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"寬度 :","label-align-sm":"right","label-for":"width",description:"寬度 : "+t.initProduct.width}},[r("b-form-input",{attrs:{id:"width",state:t.form.width>0,type:"number",min:"1",name:"width",required:""},model:{value:t.form.width,callback:function(e){t.$set(t.form,"width",e)},expression:"form.width"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"長度 :","label-align-sm":"right","label-for":"length",description:"長度 : "+t.initProduct.length}},[r("b-form-input",{attrs:{id:"length",state:t.form.length>0,type:"number",min:"1",name:"length",required:""},model:{value:t.form.length,callback:function(e){t.$set(t.form,"length",e)},expression:"form.length"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"重量 :","label-align-sm":"right","label-for":"weight",description:"重量 : "+t.initProduct.weight}},[r("b-form-input",{attrs:{id:"weight",state:t.form.weight>0,type:"number",min:"1",name:"weight",required:""},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"Material :","label-align-sm":"right","label-for":"material"}},[r("b-form-input",{attrs:{id:"material",state:t.form.material.length>0,type:"text",name:"material",placeholder:t.initProduct.material,required:""},model:{value:t.form.material,callback:function(e){t.$set(t.form,"material",e)},expression:"form.material"}})],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"分類 :","label-align-sm":"right","label-for":"categoryId",description:"目前分類 : "+t.initProduct.Category.name}},[r("b-form-select",{attrs:{id:"categoryId",placeholder:"Select Category",name:"categoryId",required:""},model:{value:t.form.CategoryId,callback:function(e){t.$set(t.form,"CategoryId",e)},expression:"form.CategoryId"}},[r("option",{attrs:{value:"1",name:"沙發"}},[t._v("沙發")]),r("option",{attrs:{value:"2",name:"床具"}},[t._v("床具")]),r("option",{attrs:{value:"3",name:"桌子"}},[t._v("桌子")]),r("option",{attrs:{value:"4",name:"長桌"}},[t._v("長桌")]),r("option",{attrs:{value:"5",name:"櫃子"}},[t._v("櫃子")])])],1)],1)],1),r("b-modal",{attrs:{id:"addProductColor",title:"新增產品顏色"},on:{ok:function(e){return e.preventDefault(),t.createProductColors()}}},[r("b-form",[r("b-form-group",{attrs:{"label-cols-sm":"3",label:"新增產品顏色 :","label-align-sm":"right","label-for":"newColor-name",description:"目前分類 : "+t.initProduct.Category.name}},[r("b-form-select",{attrs:{id:"newColor-name",placeholder:"Select Category",name:"newColor-name",required:""},model:{value:t.newColor.name,callback:function(e){t.$set(t.newColor,"name",e)},expression:"newColor.name"}},[r("option",{attrs:{value:"black",disabled:t._f("isColorDisabled")("black",t.initColors)}},[t._v("黑色")]),r("option",{attrs:{value:"blue",disabled:t._f("isColorDisabled")("blue",t.initColors)}},[t._v("藍色")]),r("option",{attrs:{value:"white",disabled:t._f("isColorDisabled")("white",t.initColors)}},[t._v("白色")]),r("option",{attrs:{value:"yellow",disabled:t._f("isColorDisabled")("yellow",t.initColors)}},[t._v("黃色")])])],1),r("b-form-group",{attrs:{"label-cols-sm":"3",label:"庫存 :","label-align-sm":"right","label-for":"newColor-quantity",description:"數入庫存數量"}},[r("b-form-input",{attrs:{id:"newColor-quantity",state:t.newColor.quantity>0,type:"number",min:"1",name:"newColor-quantity",required:""},model:{value:t.newColor.quantity,callback:function(e){t.$set(t.newColor,"quantity",e)},expression:"newColor.quantity"}})],1)],1)],1),r("b-modal",{attrs:{id:"reviseProductColor",title:"修改產品顏色"},on:{ok:function(e){return e.preventDefault(),t.reviseProductColors()}}},[r("b-form",[r("b-form-group",{attrs:{"label-cols-sm":"3",label:"修改產品顏色 :","label-align-sm":"right","label-for":"newColor-name",description:"目前分類 : "+t.initProduct.Category.name}},[r("b-form-select",{attrs:{id:"reviseColor-ColorId",placeholder:"Select Category",name:"reviseColor-ColorId",required:""},on:{change:t.updateRevisColor},model:{value:t.reviseColor.ColorId,callback:function(e){t.$set(t.reviseColor,"ColorId",e)},expression:"reviseColor.ColorId"}},t._l(t.initProduct.inventories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(t._f("convertLanguage")(e.name)))])})),0),r("b-form-select",{attrs:{id:"reviseColor-name",placeholder:"Select Category",name:"reviseColor-name",required:""},model:{value:t.reviseColor.name,callback:function(e){t.$set(t.reviseColor,"name",e)},expression:"reviseColor.name"}},[r("option",{attrs:{value:"black",disabled:t.isColorEditable("black",t.tempReviseColor)}},[t._v("黑色")]),r("option",{attrs:{value:"blue",disabled:t.isColorEditable("blue",t.tempReviseColor)}},[t._v("藍色")]),r("option",{attrs:{value:"white",disabled:t.isColorEditable("white",t.tempReviseColor)}},[t._v("白色")]),r("option",{attrs:{value:"yellow",disabled:t.isColorEditable("yellow",t.tempReviseColor)}},[t._v("黃色")])])],1)],1)],1),r("b-modal",{attrs:{id:"editInventory",title:"修改產品庫存","hide-footer":""}},[t._l(t.initProduct.inventories,(function(e){return r("b-list-group-item",{key:e.id,staticClass:"text-left"},[r("strong",[t._v(t._s(t._f("convertLanguage")(e.name))+" : ")]),r("small",{class:t.checkQuantity(e.Inventory.quantity)},[t._v(t._s(e.Inventory.quantity))]),r("b-button",{staticStyle:{float:"right"},attrs:{size:"sm",variant:"info"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.isEdit(e.id,e.Inventory.quantity,e.name)}}},[t._v("Edit")])],1)})),t.editQuantity?r("b-form",{on:{submit:function(e){return e.preventDefault(),t.editProductInventory()},reset:t.onClose}},[r("b-form-group",{attrs:{"label-cols-sm":"3",label:"庫存 :","label-align-sm":"right","label-for":"editColor-quantity"}},[t._v(" 選擇修改"+t._s(t._f("convertLanguage")(t.editColorQuantityName))+"庫存數量 "),r("b-form-input",{attrs:{id:"editColor-quantity",state:t.editColorQuantity>0,type:"number",min:"1",name:"editColor-quantity",required:""},model:{value:t.editColorQuantity,callback:function(e){t.editColorQuantity=e},expression:"editColorQuantity"}})],1),r("b-button-group",[r("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),r("b-button",{staticStyle:{"margin-left":"0.25rem"},attrs:{type:"reset",variant:"warning"}},[t._v("Close")])],1)],1):t._e()],2),r("b-modal",{attrs:{id:"editImage",title:"新增產品圖片","hide-footer":""}},[r("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.createNewProdcutImage(e)}}},[r("b-form-group",[r("label",{attrs:{for:"url"}},[t._v("上傳照片")]),t.imageForm.url?r("b-img-lazy",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.imageForm.url,width:"200",height:"200"}}):t._e(),r("input",{staticClass:"form-control-file",attrs:{id:"image",type:"file",name:"url",accept:"image/*"},on:{change:t.handleFileChange}}),r("b-button",{attrs:{type:"submit",size:"sm",variant:"success"}},[t._v("Submit")])],1)],1)],1)],1)},f=[],b=(r("4de4"),r("c975"),r("a9e3"),r("3ca3"),r("ddb0"),r("2b3d"),{name:"admin-product-BtnGroup",props:{initProduct:{type:Object},initColors:{type:Array}},data:function(){return{form:{name:"",description:"",cost:0,price:0,height:0,width:0,length:0,weight:0,material:"",CategoryId:""},newColor:{name:"",ProductId:this.initProduct.id,quantity:0},tempReviseColor:"",reviseColor:{name:"",ColorId:0},editQuantity:!1,editColorQuantityId:0,editColorQuantity:0,editColorQuantityName:"",imageForm:{url:""}}},filters:{isColorDisabled:function(t,e){return-1!==e.indexOf(t)},isColorEditable:function(t,e){return-1===e.indexOf(t)},convertLanguage:function(t){return"blue"===t?"藍色":"black"===t?"黑色":"white"===t?"白色":"yellow"===t?"黃色":""}},methods:{checkQuantity:function(t){return t<=5?"product-Quantity-danger":"product-Quantity-success"},editProductSubmit:function(){if(this.form.cost>0&&this.form.price>0&&this.form.height>0&&this.form.width>0&&this.form.length>0&&this.form.weight>0){var t=JSON.stringify(this.form);this.$emit("after-product-revise",t)}else alert("Do you forget to input something ?")},createProductColors:function(){if(this.newColor.name.length>0&&this.newColor.quantity>0){var t=JSON.stringify(this.newColor);this.$emit("after-color-create",t)}},reviseProductColors:function(){if(this.reviseColor.name.length>0){var t=JSON.stringify(this.reviseColor);this.$emit("after-color-revise",t)}},editProductInventory:function(){if(this.editColorQuantity>0){var t=this.editColorQuantityId,e=JSON.stringify({quantity:Number(this.editColorQuantity)});this.$emit("after-inventory-change",t,e)}},isEdit:function(t,e,r){this.editQuantity=!0,this.editColorQuantityId=t,this.editColorQuantity=e,this.editColorQuantityName=r},onClose:function(){this.editQuantity=!1,this.editColorQuantityId=0,this.editColorQuantity=0,this.editColorQuantityName=""},handleFileChange:function(t){var e=t.target.files;if(e.length){var r=window.URL.createObjectURL(e[0]);this.imageForm.url=r}},createNewProdcutImage:function(t){var e=t.target,r=new FormData(e);this.$emit("after-submit-image",r)},updateRevisColor:function(t){var e=this.initProduct.inventories,r=e.filter((function(e){return e.id===t}));this.tempReviseColor=r[0].name},isColorEditable:function(t,e){return e===t}},watch:{initProduct:function(t){this.initProduct=t},initColors:function(t){this.initColors=t}}}),p=b,h=(r("68ef"),Object(c["a"])(p,m,f,!1,null,"d2898ac0",null)),g=h.exports,v=r("365c"),C=r("2fa3"),y=new v["a"],w={name:"admin-product",components:{AdminProduct:d,AdminProductBtnGroup:g},data:function(){return{initProduct:{},initColors:[],isShow:!1}},created:function(){var t,e,r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,regeneratorRuntime.awrap(y.getAdminSpecificProduct(document.location.pathname));case 3:if(t=o.sent,"success"===t.status){for(this.initProduct=t.product,e=this.initProduct.inventories,r=[],i=0;i<e.length;i++)r.push(e[i].name);this.initColors=r,this.isShow=!0}o.next=10;break;case 7:o.prev=7,o.t0=o["catch"](0),C["a"].fire({icon:"warning",title:o.t0.message});case 10:case"end":return o.stop()}}),null,this,[[0,7]])},methods:{afterProductRevise:function(t){var e,r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,e=document.location.pathname,o.next=4,regeneratorRuntime.awrap(y.putAdminProduct(e,t));case 4:if(r=o.sent,200!==r.status){o.next=11;break}return o.next=8,regeneratorRuntime.awrap(y.getAdminSpecificProduct(e));case 8:return i=o.sent,this.initProduct=i.product,o.abrupt("return",C["a"].fire({icon:"success",title:"Revise Product Success"}));case 11:o.next=16;break;case 13:o.prev=13,o.t0=o["catch"](0),C["a"].fire({icon:"warning",title:o.t0.message});case 16:case"end":return o.stop()}}),null,this,[[0,13]])},afterColorCreate:function(t){var e,r,i,o,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(y.postNewColor(t));case 3:if(e=a.sent,200!==e.status){a.next=14;break}return a.next=7,regeneratorRuntime.awrap(y.getAdminSpecificProduct(document.location.pathname));case 7:for(r=a.sent,this.initProduct=r.product,i=this.initProduct.inventories,o=[],n=0;n<i.length;n++)o.push(i[n].name);return this.initColors=o,a.abrupt("return",C["a"].fire({icon:"success",title:"Create Product Color Success"}));case 14:a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](0),C["a"].fire({icon:"warning",title:a.t0.message});case 19:case"end":return a.stop()}}),null,this,[[0,16]])},afterColorRevise:function(t){var e,r,i,o,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(y.putReviseColor(this.initProduct.id,t));case 3:if(e=a.sent,200!==e.status){a.next=14;break}return a.next=7,regeneratorRuntime.awrap(y.getAdminSpecificProduct(document.location.pathname));case 7:for(r=a.sent,this.initProduct=r.product,i=this.initProduct.inventories,o=[],n=0;n<i.length;n++)o.push(i[n].name);return this.initColors=o,a.abrupt("return",C["a"].fire({icon:"success",title:"Revise Product Color Success"}));case 14:a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](0),C["a"].fire({icon:"warning",title:a.t0.message});case 19:case"end":return a.stop()}}),null,this,[[0,16]])},afterInventoryChange:function(t,e){var r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,regeneratorRuntime.awrap(y.putNewInventory(t,e));case 3:if(r=o.sent,200!==r.status){o.next=10;break}return o.next=7,regeneratorRuntime.awrap(y.getAdminSpecificProduct(document.location.pathname));case 7:return i=o.sent,this.initProduct=i.product,o.abrupt("return",C["a"].fire({icon:"success",title:"Revise Inventory Success"}));case 10:o.next=15;break;case 12:o.prev=12,o.t0=o["catch"](0),C["a"].fire({icon:"warning",title:o.t0.message});case 15:case"end":return o.stop()}}),null,this,[[0,12]])},afterSubmitImage:function(t){var e,r,i;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.prev=0,e=document.location.pathname.replace(/\/admin\/products\//gi,""),o.next=4,regeneratorRuntime.awrap(y.postNewImage(e,t));case 4:if(r=o.sent,200!==r.status){o.next=11;break}return o.next=8,regeneratorRuntime.awrap(y.getAdminSpecificProduct(document.location.pathname));case 8:return i=o.sent,this.initProduct=i.product,o.abrupt("return",C["a"].fire({icon:"success",title:"Revise Product Image Success"}));case 11:o.next=16;break;case 13:o.prev=13,o.t0=o["catch"](0),C["a"].fire({icon:"warning",title:o.t0.message});case 16:case"end":return o.stop()}}),null,this,[[0,13]])}}},P=w,_=(r("6099"),Object(c["a"])(P,i,o,!1,null,"2bae722a",null));e["default"]=_.exports},e633:function(t,e,r){}}]);
//# sourceMappingURL=chunk-7ab4deaa.4aa6e183.js.map