(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01651673"],{"260b":function(t,e,a){"use strict";var r=a("bed2"),s=a.n(r);s.a},6062:function(t,e,a){"use strict";var r=a("6d61"),s=a("6566");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},bed2:function(t,e,a){},cf2a:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticClass:"py-5 mx-5"},[a("v-container",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"my-4",attrs:{cols:"12",lg:"12"}},[a("span",{staticClass:"cart-title display-1 text--darken-3 cyan--text"},[t._v("|Order|")]),t.totalPrice<1?a("v-card-title",{staticClass:"text-muted mb-5 headline"},[t._v("No Data")]):t._e()],1),a("v-col",{staticClass:"mr-5 mb-5",attrs:{lg:"7",md:"7"}},t._l(t.order.items,(function(e){return a("v-card",{key:e.id,staticClass:"cart text--darken-3 cyan--text",attrs:{outlined:""}},[a("v-row",{staticClass:"ml-1",attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"12",lg:"12"}},[a("v-list",{attrs:{flat:""}},[a("v-list-item-group",[a("v-list-item",[a("v-row",{attrs:{justify:"space-around",align:"center"}},[a("v-col",{attrs:{cols:"12",lg:"2"}},[a("v-img",{staticClass:"cart-content",attrs:{"aspect-ratio":16/9,src:e.Images[0].url,"min-width":"80","min-height":"60"}})],1),a("v-col",{staticClass:"cart-content text-left",attrs:{cols:"12",lg:"4"}},[a("router-link",{attrs:{to:{name:"furnituresItem",params:{id:e.id}}}},[a("v-list-item-title",{staticClass:"mb-1"},[t._v(t._s(e.name))])],1),a("p",{staticClass:"caption"},[t._v("Size: "+t._s(e.length)+" x "+t._s(e.width)+" x "+t._s(e.height)+"(cm)")]),a("p",{staticClass:"caption"},[t._v("Weight: "+t._s(e.weight)+"(kg)")]),a("p",{staticClass:"caption"},[t._v("Material: "+t._s(e.material))]),a("p",{staticClass:"caption float-left"},[t._v("Color:")]),a("div",{staticClass:"product_color_item mb-1 float-left",class:t._f("convertClass")(e.color.name)})],1),a("v-col",{staticClass:"cart-content",attrs:{cols:"12",lg:"1"}},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.OrderItem.quantity,expression:"item.OrderItem.quantity",modifiers:{number:!0}}],staticClass:"form-quantity-input text-center",attrs:{id:"quantity",type:"text",name:"quantity",size:"2",disabled:""},domProps:{value:e.OrderItem.quantity},on:{input:function(a){a.target.composing||t.$set(e.OrderItem,"quantity",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("v-col",{staticClass:"cart-content",attrs:{cols:"12",lg:"3"}},[a("v-card-text",{staticClass:"item-price headline"},[t._v("$ "+t._s(e.price))])],1)],1)],1)],1)],1)],1)],1)],1)})),1),a("v-col",{attrs:{lg:"4",md:"4"}},[a("v-card",{staticClass:"mb-5"},[a("v-card-title",{staticClass:"headline"},[t._v("Shipping info")]),a("v-list-item",{staticClass:"text-left ml-2",attrs:{"three-line":""}},[a("v-list-item-content",[a("p",{staticClass:"title"},[t._v(" Name: "),a("span",{staticClass:"body-1"},[t._v(t._s(t.order.name))])]),a("p",{staticClass:"title"},[t._v(" Address: "),a("span",{staticClass:"body-1"},[t._v(t._s(t.order.address))])]),a("p",{staticClass:"title"},[t._v(" Phone: "),a("span",{staticClass:"body-1"},[t._v(t._s(t.order.phone))])]),a("p",{staticClass:"title"},[t._v(" Email: "),a("span",{staticClass:"body-1"},[t._v(t._s(t.order.email))])])])],1),a("v-card-actions",[a("v-spacer"),a("v-row",{attrs:{justify:"end"}},["未出貨"===t.order.shipping_status?a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({staticClass:"mt-3 cyan darken-3 dialog-btn",staticStyle:{"margin-right":"3em"},attrs:{raised:"",small:""}},r),[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-circle-edit-outline")])],1)]}}],null,!1,211741598),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-form",{ref:"form"},[a("v-card-title",[a("span",{staticClass:"headline text--darken-3 cyan--text"},[t._v("Shipping Info")])]),a("v-card-text",[a("v-text-field",{ref:"name",attrs:{rules:t.nameRules,label:"Full Name",placeholder:"Jack Chang",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("v-text-field",{ref:"email",attrs:{rules:t.emailRules,required:"",label:"Email",placeholder:"abc@email.com"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{ref:"tel",attrs:{rules:t.telRules,label:"Phone Number",placeholder:"0912345678",required:""},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}}),a("v-text-field",{ref:"address",attrs:{rules:t.addressRules,label:"Address Line",placeholder:"Snowy Rock Pl",counter:"40",required:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),a("v-divider",{staticClass:"mt-12"}),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.putOrder(t.order.id,t.order.UserId)}}},[t._v("Submit")])],1)],1)],1)],1):t._e()],1)],1)],1),a("v-card",{staticClass:"mb-5"},[a("v-card-title",{staticClass:"headline"},[t._v("Status")]),a("v-list-item",{staticClass:"text-left ml-2",attrs:{"three-line":""}},[a("v-list-item-content",[a("p",{staticClass:"title"},[t._v(" Order Status: "),a("span",{staticClass:"body-1"},[t._v(t._s(t.order.order_status))])]),a("p",{staticClass:"title"},[t._v(" Shipping method: "),a("span",{staticClass:"body-1"},[t._v(t._s(t.shippingMethod))])]),a("p",{staticClass:"title"},[t._v(" Payment Status: "),a("span",{staticClass:"body-1"},[t._v(t._s(t.order.payment_status))])])])],1)],1),a("v-card",{staticClass:"py-5"},[a("v-row",{attrs:{justify:"end"}},[a("div",{staticClass:"coupon-field"},[a("v-autocomplete",{ref:"couponCodes",staticStyle:{"margin-right":"3em"},attrs:{"search-input":t.coupon,items:t.couponCodes,rounded:"",outlined:"",clearable:"",color:"blue-grey darken-1",label:"Available Coupons",placeholder:"Select..."},on:{"update:searchInput":function(e){t.coupon=e},"update:search-input":function(e){t.coupon=e}}}),a("div",{staticClass:"coupon-discount",staticStyle:{"margin-left":"3em"}},[a("v-col",{attrs:{cols:"12",lg:"12"}},[a("span",[t._v("Original Price: "+t._s(t.order.total_amount))])]),a("v-col",{attrs:{cols:"12",lg:"12"}},[a("span",[t._v("Coupon discounts: -$"+t._s(t.computeDiscount.discount))])]),t.computeDiscount.discount>0?a("v-col",{attrs:{cols:"12",lg:"12"}},[a("span",{staticClass:"caption red--text text--accent-1"},[t._v(t._s(t.couponInfo.discountPercent)+"% off!")])]):t._e(),a("v-col",{attrs:{cols:"12",lg:"12"}},[a("span",[t._v("Shipping Fee: +$"+t._s(this.shippingFree))])]),a("v-col",{attrs:{cols:"12",lg:"12"}},[t.totalPrice<3e3?a("span",{staticClass:"caption red--text text--accent-1"},[t._v("Get Shipping free when shopping $3000")]):a("span",{staticClass:"caption red--text text--accent-1"},[t._v("Shipping Free!")])])],1)],1),a("span",{staticClass:"display-1 mr-10 text--darken-3 cyan--text"},[t._v("Total $"+t._s(t.computeTotalPrice.price))]),a("v-card-actions",[a("v-spacer"),a("v-row",{attrs:{align:"center",justify:"end"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",{staticClass:"mt-3 dialog-btn",staticStyle:{padding:"0 1em","margin-right":"2.5em"},attrs:{raised:"",color:"white","x-small":""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteOrder(t.order.id,t.order.UserId)}}},[t._v("Cancel Order")]),a("v-btn",t._g({staticClass:"mt-3 red lighten-3 dialog-btn",staticStyle:{padding:"0 1em","margin-right":"2.5em"},attrs:{raised:"",color:"error","x-large":""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.createPayment(t.order.id,t.order.UserId)}}},r),[t._v("Create Payment")])]}}]),model:{value:t.confirmFormDialog,callback:function(e){t.confirmFormDialog=e},expression:"confirmFormDialog"}},[a("v-form",[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline text--darken-3 cyan--text"},[t._v("Confirm Shipping Info")])]),a("v-card-text",[a("v-text-field",{ref:"tel",attrs:{label:"Phone Number",placeholder:"0912345678",disabled:""},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}}),a("v-text-field",{ref:"address",attrs:{disabled:"",label:"Address Line",placeholder:"Snowy Rock Pl"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),a("v-text-field",{attrs:{label:"Order ID",disabled:""},model:{value:t.paymentInfo.OrderId,callback:function(e){t.$set(t.paymentInfo,"OrderId",e)},expression:"paymentInfo.OrderId"}}),a("v-text-field",{attrs:{label:"Total Amount",disabled:""},model:{value:t.paymentInfo.total_amount,callback:function(e){t.$set(t.paymentInfo,"total_amount",e)},expression:"paymentInfo.total_amount"}}),a("form",{attrs:{name:"Spgateway",action:t.tradeInfo.PayGateWay,method:"POST"}},[a("input",{attrs:{type:"text",name:"MerchantID",hidden:""},domProps:{value:t.tradeInfo.MerchantID}}),a("input",{attrs:{type:"text",name:"TradeInfo",hidden:""},domProps:{value:t.tradeInfo.TradeInfo}}),a("input",{attrs:{type:"text",name:"TradeSha",hidden:""},domProps:{value:t.tradeInfo.TradeSha}}),a("input",{attrs:{type:"text",name:"Version",hidden:""},domProps:{value:t.tradeInfo.Version}}),a("v-divider",{staticClass:"mt-5"}),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(e){t.confirmFormDialog=!1}}},[t._v("Cancel")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:"",type:"submit",disabled:t.isCreating},on:{"~click":function(e){return t.submit(e)}}},[t._v("Payment")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},s=[],n=(a("c975"),a("d81d"),a("b0c0"),a("d3b7"),a("6062"),a("3ca3"),a("5319"),a("ddb0"),a("2909")),i=(a("96cf"),a("365c")),o=a("2fa3"),c=a("2708"),l=new i["a"],d={name:"Order",mixins:[c["a"],c["b"]],data:function(){return{order:[],totalPrice:0,dialog:!1,errorMessages:"",tel:"",telRules:[function(t){return!!t||"Phone Number is required"},function(t){return/\d/g.test(t)||"Must fill in phone number"},function(t){return t.length<=10||"Phone must be 10 digits"}],address:"",addressRules:[function(t){return!!t||"Address is required"},function(t){return t.length<=40||"Address must be less than 40 characters"}],formHasErrors:!1,CartId:null,coupon:null,name:"",nameRules:[function(t){return!!t||"Name is required"},function(t){return t&&t.length<=10||"Name must be less than 10 characters"}],email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],UserId:null,shippingFee:350,shippingFree:null,shippingMethod:"黑貓宅急便",color:"black",isPutOrder:!1,confirmFormDialog:!1,tradeInfo:{},paymentInfo:[],coupons:[],couponCodes:[],fromCart:!1,isCreating:!0}},computed:{form:function(){return{tel:this.tel,UserId:this.UserId,name:this.name,address:this.address,email:this.email}},couponInfo:function(){return{index:this.couponCodes.indexOf(this.coupon)>-1?this.couponCodes.indexOf(this.coupon):-1,discountPercent:this.couponCodes.indexOf(this.coupon)>-1?this.coupons[this.couponCodes.indexOf(this.coupon)].percent:-1}},putOrderForm:function(){return{shippingMethod:this.shippingMethod,shippingStatus:this.order.shipping_status,shippingFee:this.shippingFee,address:this.form.address,name:this.form.name,email:this.form.email,phone:this.form.tel,couponId:-1!==this.couponInfo.index?this.coupons[this.couponInfo.index].id:null}},computeDiscount:function(){return{discount:this.couponInfo.discountPercent>0?this.order.total_amount-this.order.total_amount*(this.couponInfo.discountPercent/100):0}},computeTotalPrice:function(){return{price:this.totalPrice-this.computeDiscount.discount}}},created:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.userId,e.next=3,regeneratorRuntime.awrap(this.fetchOrder(t));case 3:return e.next=5,regeneratorRuntime.awrap(this.getValidCoupons());case 5:this.order.total_amount>3e3?this.shippingFree=0:this.shippingFree=350;case 6:case"end":return e.stop()}}),null,this)},methods:{fetchOrder:function(t){var e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(l.getOrder(t));case 3:e=a.sent,"success"===e.status&&(this.order=e.order,this.totalPrice=e.order.total_amount,this.address=e.order.address,this.name=e.order.name,this.email=e.order.email,this.tel=e.order.phone.replace(/[^0-9]/gi,""),this.UserId=e.order.UserId),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),this.$router.push({name:"cart"}),o["a"].fire({icon:"error",title:"Order is not found"});case 11:case"end":return a.stop()}}),null,this,[[0,7]])},putOrderAPI:function(t,e){var a,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return a=JSON.stringify(this.putOrderForm),s.next=3,regeneratorRuntime.awrap(l.putOrder(t,e,a));case 3:r=s.sent,"success"===r.status?(this.dialog=!1,this.isPutOrder=!0,o["a"].fire({icon:"success",title:r.message})):o["a"].fire({icon:"error",title:"Shipping info validate failed"});case 5:case"end":return s.stop()}}),null,this)},putOrder:function(t,e){return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,!this.$refs.form){a.next=13;break}if(!this.$refs.form.validate(!0)){a.next=10;break}return a.next=5,regeneratorRuntime.awrap(this.putOrderAPI(t,e));case 5:if(!this.putOrderForm.couponId){a.next=8;break}return a.next=8,regeneratorRuntime.awrap(this.useValidCoupon(this.putOrderForm.couponId));case 8:a.next=11;break;case 10:o["a"].fire({icon:"warning",title:"Validate failed"});case 11:a.next=18;break;case 13:return a.next=15,regeneratorRuntime.awrap(this.putOrderAPI(t,e));case 15:if(!this.putOrderForm.couponId){a.next=18;break}return a.next=18,regeneratorRuntime.awrap(this.useValidCoupon(this.putOrderForm.couponId));case 18:a.next=25;break;case 20:a.prev=20,a.t0=a["catch"](0),this.isPutOrder=!1,this.dialog=!1,o["a"].fire({icon:"error",title:"Update order failed"});case 25:case"end":return a.stop()}}),null,this,[[0,20]])},createPayment:function(t,e){var a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,this.isCreating=!0,r.next=4,regeneratorRuntime.awrap(this.putOrder(t,e));case 4:return r.next=6,regeneratorRuntime.awrap(l.createPayment(t,e));case 6:a=r.sent,"success"===a.status&&(this.isPutOrder=!0,this.tradeInfo=a.tradeInfo,this.paymentInfo=a.paymentInfo,o["a"].fire({icon:"success",title:a.message}),this.isCreating=!1),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),this.isCreating=!0,o["a"].fire({icon:"error",title:"create payment failed"});case 14:case"end":return r.stop()}}),null,this,[[0,10]])},deleteOrder:function(t,e){var a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,"未出貨"!==this.order.shipping_status){r.next=8;break}return r.next=4,regeneratorRuntime.awrap(l.deleteOrder(t,e));case 4:a=r.sent,"success"===a.status&&(o["a"].fire({icon:"success",title:a.message}),this.$router.push({name:"cart"})),r.next=9;break;case 8:o["a"].fire({icon:"warning",title:"Preparing package, not able to cancel order"});case 9:r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),o["a"].fire({icon:"error",title:"Not able to delete order"});case 14:case"end":return r.stop()}}),null,this,[[0,11]])},getValidCoupons:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(l.getValidCoupons());case 3:t=e.sent,"success"===t.status&&(this.coupons=t.coupons,this.couponCodes=Object(n["a"])(new Set(t.coupons.map((function(t){return t.coupon_code}))))),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),o["a"].fire({icon:"error",title:"Not able to fetch coupons"});case 10:case"end":return e.stop()}}),null,this,[[0,7]])},useValidCoupon:function(t){var e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,regeneratorRuntime.awrap(l.useValidCoupon(t));case 3:e=a.sent,"success"===e.status&&o["a"].fire({icon:"success",title:e.message}),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),o["a"].fire({icon:"error",title:"Not able to use coupon"});case 10:case"end":return a.stop()}}),null,null,[[0,7]])}},watch:{order:function(t){this.order=t},totalPrice:function(t){this.totalPrice=t},tel:function(t){this.tel=t},address:function(t){this.address=t},name:function(t){this.name=t},email:function(t){this.email=t}}},u=d,p=(a("260b"),a("2877")),m=a("6544"),h=a.n(m),f=a("7496"),v=a("c6a6"),g=a("8336"),x=a("b0af"),b=a("99d9"),C=a("62ad"),_=a("a523"),y=a("169a"),I=a("ce7e"),w=a("4bd4"),k=a("132d"),O=a("adda"),P=a("8860"),R=a("da13"),S=a("5d23"),V=a("1baa"),F=a("0fd9"),D=a("2fa4"),q=a("8654"),$=Object(p["a"])(u,r,s,!1,null,"6a6dbcc2",null);e["default"]=$.exports;h()($,{VApp:f["a"],VAutocomplete:v["a"],VBtn:g["a"],VCard:x["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:C["a"],VContainer:_["a"],VDialog:y["a"],VDivider:I["a"],VForm:w["a"],VIcon:k["a"],VImg:O["a"],VList:P["a"],VListItem:R["a"],VListItemContent:S["a"],VListItemGroup:V["a"],VListItemTitle:S["c"],VRow:F["a"],VSpacer:D["a"],VTextField:q["a"]})},dc22:function(t,e,a){"use strict";function r(t,e){var a=e.value,r=e.options||{passive:!0};window.addEventListener("resize",a,r),t._onResize={callback:a,options:r},e.modifiers&&e.modifiers.quiet||a()}function s(t){if(t._onResize){var e=t._onResize,a=e.callback,r=e.options;window.removeEventListener("resize",a,r),delete t._onResize}}var n={inserted:r,unbind:s};e["a"]=n}}]);
//# sourceMappingURL=chunk-01651673.0a845e8f.js.map