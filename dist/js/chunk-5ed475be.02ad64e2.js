(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ed475be"],{"0798":function(t,e,r){"use strict";r("a4d3"),r("4de4"),r("caad"),r("e439"),r("dbb4"),r("b64b"),r("159b");var i=r("ade3"),s=(r("0c18"),r("10d2")),n=r("afdd"),a=r("9d26"),o=r("f2e7"),c=r("7560"),l=r("f40d"),u=r("58df"),d=r("d9bd");function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e["a"]=Object(u["a"])(s["a"],o["a"],l["a"]).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,icon:{default:"",type:[Boolean,String],validator:function(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var t={staticClass:"v-alert__border",class:Object(i["a"])({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(n["a"],{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(a["a"],{props:{color:e}},"$cancel")])},__cachedIcon:function(){return this.computedIcon?this.$createElement(a["a"],{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=p({},s["a"].options.computed.classes.call(this),{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||c["a"].options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&Object(d["a"])("outline","outlined",this)},methods:{genWrapper:function(){var t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert:function(){var t={staticClass:"v-alert",attrs:{role:"alert"},class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},"0c18":function(t,e,r){},"4f6c":function(t,e,r){"use strict";var i=r("dff9"),s=r.n(i);s.a},b789:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{staticClass:"py-5 mx-5"},[r("v-container",[r("UserTabs"),r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12",lg:"12"}},[r("v-card",{staticClass:"cart py-5 text--darken-3 cyan--text"},[r("v-col",{staticClass:"my-4",attrs:{cols:"12",lg:"12"}},[r("span",{staticClass:"cart-title display-1"},[t._v("|Shopping cart|")]),t.totalPrice<1?r("v-card-title",{staticClass:"text-muted mb-5 headline"},[t._v("No Data")]):t._e()],1),r("v-row",{staticClass:"ml-1",attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",lg:"10"}},[r("v-list",{attrs:{flat:""}},[r("v-list-item-group",t._l(t.cart,(function(e){return r("v-list-item",{key:e.id},[r("v-row",{attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",lg:"3"}},[r("router-link",{attrs:{to:{name:"furnituresItem",params:{id:e.Product.id}}}},[r("v-img",{staticClass:"cart-content",attrs:{"aspect-ratio":16/9,src:e.Image.url,"min-width":"210","min-height":"250"}})],1)],1),r("v-col",{staticClass:"cart-content",attrs:{cols:"12",lg:"3"}},[r("router-link",{attrs:{to:{name:"furnituresItem",params:{id:e.Product.id}}}},[r("v-list-item-title",{staticClass:"mb-1"},[t._v(t._s(e.Product.name))])],1),r("p",{staticClass:"caption"},[t._v("Size: "+t._s(e.Product.length)+" x "+t._s(e.Product.width)+" x "+t._s(e.Product.height)+"(cm)")]),r("p",{staticClass:"caption"},[t._v("Weight: "+t._s(e.Product.weight)+"(kg)")]),r("p",{staticClass:"caption"},[t._v("Material: "+t._s(e.Product.material))]),r("v-list-item-subtitle",[r("div",{staticClass:"product_color_item mb-1",class:t._f("convertClass")(e.Color.name)})])],1),e.Inventories.quantity<e.quantity?r("v-col",{staticClass:"cart-content",attrs:{cols:"12",lg:"3"}},[r("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v("Stock is not enough")])],1):r("v-col",{staticClass:"cart-content",attrs:{cols:"12",lg:"3"}},[r("v-btn",{attrs:{"x-small":""},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.subCartItem(e.id)}}},[t._v("-")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.quantity,expression:"item.quantity",modifiers:{number:!0}}],staticClass:"form-quantity-input text-center quantity",attrs:{type:"text",name:"quantity",size:"2",disabled:""},domProps:{value:e.quantity},on:{input:function(r){r.target.composing||t.$set(e,"quantity",t._n(r.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("v-btn",{attrs:{"x-small":""},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.addCartItem(e.id)}}},[t._v("+")])],1),r("v-col",{staticClass:"cart-content",attrs:{cols:"12",lg:"2"}},[r("v-card-text",{staticClass:"item-price headline"},[t._v("$ "+t._s(e.price))]),r("v-list-item-action",[r("v-icon",{on:{click:function(r){return r.stopPropagation(),r.preventDefault(),t.deleteCartItem(e.id)}}},[t._v("mdi-trash-can")])],1)],1)],1)],1)})),1)],1)],1)],1),r("div",{staticClass:"my-4 bottom-divider"},[r("span",{staticClass:"cart-title display-1",staticStyle:{"padding-right":"1em"}},[t._v("Total $"+t._s(t.totalPrice))])]),r("v-card-actions",[r("v-spacer"),r("v-row",{attrs:{justify:"end"}},[t.currentUser.address&&t.currentUser.tel?r("v-btn",{staticClass:"mt-3 red lighten-3",staticStyle:{padding:"0 1em","margin-right":"3em"},attrs:{raised:"",color:"error",large:"",disabled:t.disablePayment},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.createOrder(e)}}},[t._v("Complete Payment")]):r("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[r("v-btn",t._g({staticClass:"mt-3 red lighten-3 dialog-btn",staticStyle:{padding:"0 1em","margin-right":"3em"},attrs:{raised:"",color:"error",large:"",disabled:t.disablePayment}},i),[t._v("Complete Payment")])]}}],null,!1,298411921),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-form",{ref:"shippingForm"},[r("v-card-title",[r("span",{staticClass:"headline text--darken-3 cyan--text"},[t._v("Shipping Info")])]),r("v-card-text",[r("v-text-field",{ref:"tel",attrs:{rules:t.telRules,label:"Phone Number",placeholder:"0912345678",required:""},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}}),r("v-text-field",{ref:"initialAddress",attrs:{rules:t.initialAddressRules,label:"Address Line",placeholder:"Snowy Rock Pl",counter:"40",required:""},model:{value:t.initialAddress,callback:function(e){t.initialAddress=e},expression:"initialAddress"}}),r("v-text-field",{ref:"district",attrs:{rules:t.districtRules,label:"District / Township",required:"",placeholder:"士林區"},model:{value:t.district,callback:function(e){t.district=e},expression:"district"}}),r("v-text-field",{ref:"zip",attrs:{rules:t.zipRules,label:"ZIP / Postal Code",required:"",placeholder:"168"},model:{value:t.zip,callback:function(e){t.zip=e},expression:"zip"}}),r("v-autocomplete",{ref:"county",attrs:{"search-input":t.county,rules:t.countyRules,items:t.counties,"error-messages":t.errorMessages,label:"County / City",placeholder:"Select...",required:""},on:{"update:searchInput":function(e){t.county=e},"update:search-input":function(e){t.county=e}},model:{value:t.county,callback:function(e){t.county=e},expression:"county"}})],1),r("v-divider",{staticClass:"mt-12"}),r("v-card-actions",[r("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:"",disabled:t.shortageStock},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.createOrder(e)}}},[t._v("Submit change")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},s=[],n=(r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("5319"),r("159b"),r("96cf"),r("ade3")),a=r("71b7"),o=r("365c"),c=r("2fa3"),l=r("2708"),u=r("2f62");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p=new o["a"],f={name:"Cart",mixins:[l["a"],l["b"]],components:{UserTabs:a["a"]},data:function(){return{cart:[],totalPrice:0,user:[],dialog:!1,counties:["臺北市","新北市","基隆市","桃園市","新竹縣","新竹市","苗栗縣","臺中市","南投縣","彰化縣","雲林縣","嘉義縣","嘉義市","臺南市","高雄市","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣"],errorMessages:"",tel:"",telRules:[function(t){return!!t||"Phone Number is required"},function(t){return/\d/g.test(t)||"Must fill in phone number"},function(t){return t.length<=10||"Phone must be 10 digits"}],initialAddress:"",initialAddressRules:[function(t){return!!t||"Address is required"},function(t){return t.length<=40||"Address must be less than 40 characters"}],address:"",district:"",districtRules:[function(t){return!!t||"Address is required"}],zip:"",zipRules:[function(t){return!!t||"Zip is required"},function(t){return t.length<=3||"Zip length must be less than 3"}],county:"",countyRules:[function(t){return!!t||"County / City is required"},this.countyCheck],CartId:null,discount:0,shortageStock:!1}},computed:h({},Object(u["b"])(["currentUser","isAuthenticated"]),{beforeAttach:function(){return{tel:this.tel,initialAddress:this.initialAddress,district:this.district,zip:this.zip,county:this.county}},form:function(){return{tel:this.currentUser.tel?this.currentUser.tel.replace(/[^0-9]/gi,""):this.tel,UserId:this.currentUser.id,CartId:this.cart.length>0?this.cart[0].CartId:-1,address:this.currentUser.address?this.currentUser.address:this.zip+this.county+this.district+this.initialAddress}},disablePayment:function(){return this.shortageStock||this.totalPrice<1}}),created:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.fetchCart());case 2:case"end":return t.stop()}}),null,this)},methods:{countyCheck:function(){return this.errorMessages=this.county?"":"This field is required",!0},fetchCart:function(){var t;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(p.getCart());case 3:t=e.sent,"success"===t.status&&(this.cart=t.cart,this.totalPrice=t.totalPrice,this.shortageStock=this.cart.some(this.checkInventory)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),c["a"].fire({icon:"info",title:"Get your own decorations!"});case 10:case"end":return e.stop()}}),null,this,[[0,7]])},addCartItem:function(t){var e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(p.addCartItem(t));case 3:e=r.sent,"success"===e.status&&c["a"].fire({icon:"success",title:e.message}),this.fetchCart(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),c["a"].fire({icon:"error",title:"The storage is not enough"});case 11:case"end":return r.stop()}}),null,this,[[0,8]])},subCartItem:function(t){var e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(p.subCartItem(t));case 3:e=r.sent,"success"===e.status&&c["a"].fire({icon:"success",title:e.message}),this.fetchCart(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),c["a"].fire({icon:"error",title:"Substract cart item failed"});case 11:case"end":return r.stop()}}),null,this,[[0,8]])},deleteCartItem:function(t){var e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,regeneratorRuntime.awrap(p.deleteCartItem(t));case 3:e=r.sent,"success"===e.status&&c["a"].fire({icon:"success",title:e.message}),this.fetchCart(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),c["a"].fire({icon:"error",title:"Add cart item failed"});case 11:case"end":return r.stop()}}),null,this,[[0,8]])},createOrderAPI:function(){var t,e;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,this.fetchCart(),t=JSON.stringify(this.form),r.next=5,regeneratorRuntime.awrap(p.createOrder(t));case 5:e=r.sent,"success"===e.status?this.$router.push({name:"order",params:{userId:this.form.UserId}}):(this.$router.push({name:"cart"}),this.dialog=!1),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),c["a"].fire({icon:"warning",title:"Must finish order payment before create new order"}),this.$router.push({name:"order",params:{userId:this.form.UserId}});case 13:case"end":return r.stop()}}),null,this,[[0,9]])},createOrder:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,0===this.cart.length&&(c["a"].fire({icon:"info",title:"Get your own decorations!"}),this.dialog=!1),this.isAuthenticated||(c["a"].fire({icon:"warning",title:"Must sign in before create order"}),this.$router.push({name:"SignIn"})),!this.currentUser){t.next=20;break}if(!(this.currentUser.address.length>0&&this.currentUser.tel.length>0&&this.form.UserId&&this.form.CartId&&this.form.address.length>0&&this.form.tel.length>0)){t.next=13;break}if(!this.shortageStock){t.next=9;break}c["a"].fire({icon:"warning",title:"Shortage of stock"}),t.next=11;break;case 9:return t.next=11,regeneratorRuntime.awrap(this.createOrderAPI());case 11:t.next=20;break;case 13:if(!(this.tel&&this.initialAddress&&this.district&&this.zip&&this.county&&this.$refs.shippingForm.validate(!0))||this.shortageStock){t.next=19;break}return this.dialog=!1,t.next=17,regeneratorRuntime.awrap(this.createOrderAPI());case 17:t.next=20;break;case 19:c["a"].fire({icon:"warning",title:"Validate failed"});case 20:t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](0),this.$router.push({name:"orders"});case 25:case"end":return t.stop()}}),null,this,[[0,22]])},checkInventory:function(t){return t.Inventories.quantity<t.quantity}},watch:{cart:function(t){this.cart=t},totalPrice:function(t){this.totalPrice=t},tel:function(t){this.tel=t},initialAddress:function(t){this.initialAddress=t},district:function(t){this.district=t},zip:function(t){this.zip=t},county:function(t){this.county=t}}},m=f,v=(r("4f6c"),r("2877")),g=r("6544"),b=r.n(g),y=r("0798"),C=r("7496"),x=r("c6a6"),w=r("8336"),_=r("b0af"),k=r("99d9"),P=r("62ad"),O=r("a523"),I=r("169a"),S=r("ce7e"),A=r("4bd4"),j=r("132d"),$=r("adda"),R=r("8860"),V=r("da13"),q=r("1800"),D=r("1baa"),B=r("5d23"),U=r("0fd9"),z=r("2fa4"),T=r("8654"),E=Object(v["a"])(m,i,s,!1,null,"1200f583",null);e["default"]=E.exports;b()(E,{VAlert:y["a"],VApp:C["a"],VAutocomplete:x["a"],VBtn:w["a"],VCard:_["a"],VCardActions:k["a"],VCardText:k["c"],VCardTitle:k["d"],VCol:P["a"],VContainer:O["a"],VDialog:I["a"],VDivider:S["a"],VForm:A["a"],VIcon:j["a"],VImg:$["a"],VList:R["a"],VListItem:V["a"],VListItemAction:q["a"],VListItemGroup:D["a"],VListItemSubtitle:B["b"],VListItemTitle:B["c"],VRow:U["a"],VSpacer:z["a"],VTextField:T["a"]})},dff9:function(t,e,r){},f40d:function(t,e,r){"use strict";var i=r("2b0e");e["a"]=i["default"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})}}]);
//# sourceMappingURL=chunk-5ed475be.02ad64e2.js.map